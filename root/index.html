<!DOCTYPE html>
<html>
  <body>
    <h2>Reed Sheep paths: RSR</h2>

    <form>
      <label for="startPos"
        >Car start position (x, y, heading in deg 0-360): </label
      ><br />
      <input
        type="text"
        id="startPos"
        name="startPos"
        value="(0, 0, 0)"
      /><br />
      <label for="endPos">Car goal position (x, y, heading): </label><br />
      <input type="text" id="endPos" name="endPos" value="(1, 0, 0)" />
      <p>(turning radius is 1</p>
    </form>

    <button id="runButton" onclick="run()">Calculate</button>

    <p>Values:</p>
    <p id="output0"></p>
    <p id="output1"></p>
    <p id="output2"></p>
    <p id="output3"></p>
    <p id="output4"></p>

    <script type="text/javascript" src="ReedSheppPaths.js"></script>

    <script>
      function setOutput(...strs) {
        for (let i = 0; i < strs.length; ++i)
          document.getElementById('output' + i.toString()).innerHTML = strs[i];
      }

      function run() {
        // values
        const startValues = document
          .getElementById('startPos')
          .value.slice(1, -1)
          .split(',')
          .map((e) => Number(e));
        const endValues = document
          .getElementById('endPos')
          .value.slice(1, -1)
          .split(',')
          .map((e) => Number(e));
        startValues[2] = degToRad(startValues[2]);
        endValues[2] = degToRad(endValues[2]);

        const _startCar = {
          pos: { x: startValues[0], y: startValues[1] },
          heading: startValues[2]
        };

        const _endCar = {
          pos: { x: endValues[0], y: endValues[1] },
          heading: endValues[2]
        };

        const circAMidPoint = getRightCircle(_startCar);
        const circBMidPoint = getRightCircle(_endCar);

        let outputStr1 =
          'Right circle from start car middle point: { x: ' +
          circAMidPoint.x.toFixed(2) +
          ', y: ' +
          circAMidPoint.y.toFixed(2) +
          ' }';
        let outputStr2 =
          'Right circle from end car middle point: { x: ' +
          circBMidPoint.x.toFixed(2) +
          ', y: ' +
          circBMidPoint.y.toFixed(2) +
          ' }';
        const vals = getRSR(_startCar, _endCar);
        let outputStr3 = JSON.stringify(
          vals,
          (key, value) => {
            if (typeof value === 'number' && !key.startsWith('length'))
              return radToDeg(value).toFixed(2);
            else if (typeof value === 'number') return value.toFixed(2);
            else return value;
          },
          '<br>'
        );

        setOutput(
          outputStr1,
          outputStr2,
          'angles in deg, lengths in units: ' + outputStr3
        );
      }
    </script>
  </body>
</html>
